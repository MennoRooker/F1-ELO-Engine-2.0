{% extends "layout.html" %}

{% block title %}
Leaderboards
{% endblock %}

{% block main %}
<!-- Load plotly.js into the DOM -->
<script src='https://cdn.plot.ly/plotly-2.35.2.min.js'></script>

<script src="static/ratings-plot.js" type="module"></script>

<div class="container">
    <h1 class="my-4"> {{ year }} Driver Standings</h1>

    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Rank</th>
                <th>Driver</th>
                <th>Rating</th>
            </tr>
        </thead>
        <tbody>
            {% for driver, total_points, zero_sum_rating in standings %}
            <tr>
                <td>{{ loop.index }}</td> <!-- Jinja's loop.index starts at 1 -->
                <td>{{ driver }}</td>
                <td>{{ total_points|round|int if total_points.is_integer() else total_points }}</td>
                <td>{{ zero_sum }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div id='myDiv'><!-- Plotly chart will be drawn inside this DIV --></div>

    <!-- Pass the plot data to a data-* attribute -->
    <div id="plotDataDiv" data-plot-data='{{ plot_data | tojson | safe }}'></div>
    
</div>
{% endblock %}

